<?xml version="1.0"?>

<fragment version="1">

	<require>fr.toutatice.ecm.platform.web</require>

	<extension target="application#MODULE">
		<module>
			<java>${bundle.fileName}</java>
		</module>
	</extension>

	<extension target="faces-config#COMPONENT">

		<!-- Override Nx type to associate converter -->
		<component>
			<component-type>
				org.nuxeo.ecm.platform.ui.web.component.editor.UIHtmlEditor
			</component-type>
			<component-class>
				org.opentoutatice.ecm.attached.files.url.converter.OttcUIHtmlEditor
			</component-class>
		</component>

	</extension>

	<extension target="faces-config#RENDERER">

		<!-- Replacement of Nx Renderer -->
		<renderer>
			<component-family>javax.faces.Input</component-family>
			<renderer-type>
				org.nuxeo.ecm.platform.ui.web.component.editor.UIHtmlEditor
			</renderer-type>
			<renderer-class>
				org.opentoutatice.ecm.attached.files.url.converter.OttcHTMLEditorRenderer
			</renderer-class>
		</renderer>

	</extension>

	<!-- To be able to use it in xhtml of ttc_richtext widget -->
	<extension target="faces-config#CONVERTER">
		<converter>
			<converter-id>DocumentContentConverter</converter-id>
			<converter-class>
				org.opentoutatice.ecm.attached.files.url.converter.DocumentContentConverter
			</converter-class>
		</converter>
	</extension>

	<install>
		<unzip from="${bundle.fileName}" to="/">
			<include>nuxeo.war/**</include>
		</unzip>
	</install>

</fragment>
