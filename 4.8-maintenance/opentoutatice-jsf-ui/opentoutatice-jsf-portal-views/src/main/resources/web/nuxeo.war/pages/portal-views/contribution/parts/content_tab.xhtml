<ui:fragment xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:nxl="http://nuxeo.org/nxforms/layout"
	xmlns:nxu="http://nuxeo.org/nxweb/util"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:nxd="http://nuxeo.org/nxweb/document">

	<nxl:layoutRow>
		<nxl:layoutRowWidget>
		
			<c:choose>
				<c:when test="#{metadataTabsBuilder.showWidget(widget.name, tabId)}">

					<nxu:set var="requiredClass"
						value="#{nxu:test(widget.required, 'required', '')}" />

					<div class="form-group #{requiredClass}">

						<ui:include
							src="/pages/portal-views/parts/widgets/widget_label.xhtml" />

						<nxu:set var="viewClass"
							value="#{nxu:test(widget.mode == 'view','form-control-static','')}" />
						<nxu:set var="fileWidgetClass"
							value="#{nxu:test((widget.type == 'file') or (widget.name == 'file') or (widget.name == 'files'),'fileWidget','')}" />
						<nxu:set var="gridSize"
							value="#{nxu:test(widget.type == 'layout', 'col-sm-12', 'col-sm-10')}" />
						<nxu:set var="gridOffSet"
							value="#{nxu:test(widget.properties.styleClass == 'layoutTitle', 'col-sm-offset-2', '')}" />

						<div
							class="#{gridSize} #{gridOffSet} ttc-form-control #{viewClass} #{fileWidgetClass}">
							<c:choose>
								<c:when test="#{widget.type == 'layout'}">
									<nxu:set var="lMode"
										value="#{nxu:test(not empty widget.properties.mode, widget.properties.mode, widget.mode)}" />

									<nxl:widget widget="#{widget}" mode="#{lMode}" value="#{value}" template="/pages/portal-views/parts/content_tab.xhtml">
										<ui:param name="tabId" value="#{tabId}" />
									</nxl:widget>
								</c:when>

								<c:otherwise>
									<nxl:widget widget="#{widget}" value="#{value}" />
								</c:otherwise>
							</c:choose>
						</div>
					</div>

				</c:when>
			</c:choose>

		</nxl:layoutRowWidget>
	</nxl:layoutRow>

</ui:fragment>