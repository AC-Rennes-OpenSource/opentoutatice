<?xml version="1.0"?>

<component name="fr.toutatice.ecm.platform.core.doctypes">

	<require>org.nuxeo.ecm.core.schema.TypeService</require>
	<require>fr.toutatice.ecm.platform.core.schemas</require>

	<extension target="org.nuxeo.ecm.core.schema.TypeService"
		point="doctype">

		<facet name="Space">
			<schema name="toutatice_space" />
		</facet>
		<facet name="TTCPublishSpace">
			<schema name="toutatice_space" />
		</facet>

		<facet name="isLocalPublishLive" />
		<facet name="isRemoteProxy" />

		<facet name="TTCAttachableImages" />
		<facet name="FolderishEditable" />
		<facet name="TTCPortalConfigurable" />
		<facet name="SpaceContent" />
		<facet name="SpaceNavigationItem" />
		<facet name="MasterPublishSpace" />
		
		<facet name="WebidDisabled" />

		<!-- Pour permettre l'import xml d'arborescence contenant des documents 
			publiés: facette Immutable posée dynamiquement (elle n'existe pas de façon 
			statique, i.e. définie dans une contribution native Nuxeo) -->
		<facet name="Immutable" />

		<doctype name="PortalSite" extends="Document">
			<schema name="common" />
			<schema name="dublincore" />
			<schema name="files" />
			<schema name="portalsite" />
			<schema name="toutatice_navigation" />
			<schema name="webpage" />
			<schema name="regions" />
			<schema name="fragments" />
			<schema name="html_fragments" />
			<schema name="picture_fragments" />
			<schema name="zoom_fragments" />
			<schema name="links" />
			<schema name="links_fragments" />
			<schema name="list_fragments" />
			<schema name="summary_fragments" />
			<schema name="portlet_fragments" />
			<schema name="rss_fragments" />
			<schema name="criteria_list_fragments" />
			<schema name="slider_list_fragments" />
			<schema name="portlet_properties" />
			<schema name="ew_fragments" />
			<schema name="ew_fragments_properties" />
			<facet name="Space" />
			<facet name="Folderish" />
			<facet name="Orderable" />
			<facet name="TTCPublishSpace" />
			<facet name="SuperSpace" />
			<facet name="TTCPortalConfigurable" />
			<facet name="TTCAttachableImages" />
			<facet name="FolderishEditable" />
			<facet name="SpaceNavigationItem" />
			<facet name="MasterPublishSpace" />
			<prefetch>common.icon, dc:title, dc:description, dc:created,
				dc:modified,
				dc:lastContributor, dc:creator
			</prefetch>
		</doctype>

		<doctype name="PortalPage" extends="Document">
			<schema name="common" />
			<schema name="dublincore" />
			<schema name="files" />
			<schema name="portalpage" />
			<schema name="toutatice_navigation" />
			<schema name="webpage" />
			<schema name="regions" />
			<schema name="fragments" />
			<schema name="html_fragments" />
			<schema name="picture_fragments" />
			<schema name="zoom_fragments" />
			<schema name="links" />
			<schema name="links_fragments" />
			<schema name="list_fragments" />
			<schema name="summary_fragments" />
			<schema name="portlet_fragments" />
			<schema name="rss_fragments" />
			<schema name="criteria_list_fragments" />
			<schema name="slider_list_fragments" />
			<schema name="portlet_properties" />
			<schema name="ew_fragments" />
			<schema name="ew_fragments_properties" />			
			<facet name="Folderish" />
			<facet name="Orderable" />
			<facet name="TTCPortalConfigurable" />
			<facet name="TTCAttachableImages" />
			<facet name="FolderishEditable" />
			<facet name="SpaceNavigationItem" />
			<facet name="PublishSpace" />
			<facet name="SpaceContent" />
			<prefetch>common.icon, dc:title, dc:description, dc:created,
				dc:modified,
				dc:lastContributor, dc:creator
			</prefetch>
		</doctype>

		<doctype name="Domain" append="true">
			<schema name="toutatice_domain" />
		</doctype>

		<doctype name="Workspace" append="true">
			<facet name="Orderable" />
			<schema name="toutatice_navigation" />
		</doctype>

	</extension>

	<extension target="org.nuxeo.ecm.platform.types.TypeService"
		point="types">

		<type id="Domain">
			<subtypes>
				<type>PortalSite</type>
			</subtypes>
		</type>
		<type id="WorkspaceRoot">
			<subtypes>
				<type>PortalSite</type>
			</subtypes>
		</type>
		<type id="Workspace">
			<subtypes>
				<type>PortalSite</type>
			</subtypes>
		</type>

		<type id="PortalSite">
			<subtypes>
				<type>PortalPage</type>
				<type>Folder</type>
				<type>OrderedFolder</type>
				<type>PictureBook</type>
				<type>File</type>
				<type>Note</type>
			</subtypes>
		</type>

		<type id="PortalPage">
			<subtypes>
				<type>PortalPage</type>
				<type>Folder</type>
				<type>OrderedFolder</type>
				<type>PictureBook</type>
				<type>File</type>
				<type>Note</type>
			</subtypes>
		</type>

	</extension>

</component>
