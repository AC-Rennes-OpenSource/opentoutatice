<f:subview xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:nxu="http://nuxeo.org/nxweb/util"
	xmlns:nxh="http://nuxeo.org/nxweb/html"
	xmlns:nxd="http://nuxeo.org/nxweb/document"
  	xmlns:nxl="http://nuxeo.org/nxforms/layout"
  	xmlns:c="http://java.sun.com/jstl/core">

	<h1>

		<div class="globalActions">

			<nxu:set var="actions" 
				value="#{webActions.getActionsList('TOUTATICE_DOCUMENT_HEADER_ACTIONS_LIST')}"
				cache="true">
				<c:if test="#{!empty actions}">

				<nxl:widgetType name="summary_current_document_custom_actions"
				      mode="view"
				      label=""
				      styleClass="globalActionBar"
				      subStyleClass="contextActions"
				      actionStyleClass="button"
				      display="icons"
				      category="TOUTATICE_DOCUMENT_HEADER_ACTIONS_LIST"
				      maxActionsNumber="5"
				      value="#{currentDocument}" />
				</c:if>
			</nxu:set>

			<nxu:set var="actions"
				value="#{webActions.getActionsList('DOCUMENT_HEADER_ACTIONS_LIST')}"
				cache="true">
				<c:if test="#{!empty actions}">
					<c:forEach var="action" items="#{actions}">
						<nxh:commandLink action="#{action.getLink()}"
							onclick="#{action.confirm}" immediate="#{action.immediate}">
							<h:graphicImage value="#{action.icon}"
								rendered="#{not empty action.icon}"
								title="#{messages[action.label]}" />
						</nxh:commandLink>
					</c:forEach>
				</c:if>
			</nxu:set>
		
			<nxu:set var="actions"
				value="#{webActions.getActionsList('DOCUMENT_HEADER_ACTIONS_LIST_HREF')}"
				cache="true">
				<c:if test="#{!empty actions}">
					<c:forEach var="action" items="#{actions}">
						<nxu:set var="link" value="#{action.getLink()}" resolveTwice="true">
							<a href="#{link}"> <h:graphicImage value="#{action.icon}"
									rendered="#{not empty action.icon}"
									title="#{messages[action.label]}" />
							</a>
						</nxu:set>
					</c:forEach>
				</c:if>
			</nxu:set>
			
		</div>
		
	</h1>

</f:subview>
